<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Extracting Features · SpeechFeatures</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">SpeechFeatures</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Extracting Features</a><ul class="internal"><li><a class="tocitem" href="#Loading-an-audio-file-1"><span>Loading an audio file</span></a></li><li><a class="tocitem" href="#Extracting-the-features-1"><span>Extracting the features</span></a></li><li><a class="tocitem" href="#Deltas-and-mean-normalization-1"><span>Deltas and mean normalization</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Extracting Features</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Extracting Features</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/lucasondel/SpeechFeatures.jl/blob/master/docs/src/feaextract.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Features-extraction-1"><a class="docs-heading-anchor" href="#Features-extraction-1">Features extraction</a><a class="docs-heading-anchor-permalink" href="#Features-extraction-1" title="Permalink"></a></h1><h2 id="Loading-an-audio-file-1"><a class="docs-heading-anchor" href="#Loading-an-audio-file-1">Loading an audio file</a><a class="docs-heading-anchor-permalink" href="#Loading-an-audio-file-1" title="Permalink"></a></h2><p>To extract any type of speech features you will need the audio signal stored in an <code>Array</code>-like object and the sampling rate in Hertz. SpeechFeatures does not provide a way to load these two elements from audio files directly but there are several Julia packages to do this. In this tutorial, we will use <a href="https://github.com/dancasimiro/WAV.jl">WAV.jl</a>. For the rest of the tutorial, we assumed that you have installed the WAV.jl package in your Julia environment.</p><p>First of all, as an example, we download an audio file from the <a href="https://catalog.ldc.upenn.edu/LDC93S1">TIMIT</a> corpus. In the Julia REPL type:</p><pre><code class="language-juliashowcase">julia&gt; run(`wget https://catalog.ldc.upenn.edu/desc/addenda/LDC93S1.wav`)</code></pre><p>Now, we load the audio waveform:</p><pre><code class="language-none">julia&gt; using WAV
julia&gt; channels, srate = wavread(&quot;LDC93S1.wav&quot;, format = &quot;double&quot;)</code></pre><p>Where <code>channels</code> is a <code>N</code>x<code>C</code> matrix where <code>N</code> is the length of the audio in samples and <code>C</code> is the number of channels. Since TIMIT is mono recorded it has only one channel. <code>format = &quot;double&quot;</code> indicates that the signals in <code>channels</code> will be encoded with double precision and each sample of the signal will be between <code>1.0</code> and <code>-1.0</code>.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>The <code>wavread</code> function also accepts <code>format = &quot;native&quot;</code> which will return the data in the format it is stored in the WAV file. We discourage its use as extracting the features from integer or floating point encoded signal can lead to drastically different output.</p></div></div><p>We get the signal from the <code>channels</code> matrix:</p><pre><code class="language-julia">julia&gt; x = channels[:, 1]</code></pre><p>As a sanity check, we print the sampling rate and duration of the signal:</p><pre><code class="language-julia">julia&gt; println(&quot;sampling freq: $srate Hz\nduration: $(round(length(x) / srate, digits=2)) s&quot;)
sampling freq: 16000.0 Hz
duration: 2.92 s</code></pre><p>and we plot the waveform:</p><pre><code class="language-julia">julia&gt; using Plots
julia&gt; pyplot()
julia&gt; t = range(0, length(x) / srate, length=length(x))
julia&gt; plot(t, x, size = (1000, 300), xlabel = &quot;time (seconds)&quot;, legend = false)</code></pre><p><img src="../images/signal.svg" alt/></p><h2 id="Extracting-the-features-1"><a class="docs-heading-anchor" href="#Extracting-the-features-1">Extracting the features</a><a class="docs-heading-anchor-permalink" href="#Extracting-the-features-1" title="Permalink"></a></h2><p>All the different types of features supported by this package follow the same extraction scheme.</p><ol><li>create a the feature extractor object with a specific configuration</li><li>send the signal(s) to this extractor to get the features.</li></ol><p>SpeechFeatures provides the following feature extractor:</p><table><tr><th style="text-align: left">Extractor</th><th style="text-align: left">Constructor</th><th style="text-align: left">Description</th></tr><tr><td style="text-align: left">Log magnitude spectrum</td><td style="text-align: left"><code>LogMagnitudeSpectrum([options])</code></td><td style="text-align: left">Logarithm of the magnitude of the Short Term Fourier Transform (STFT)</td></tr><tr><td style="text-align: left">Log Mel Spectrum</td><td style="text-align: left"><code>LogMelSpectrum([options])</code></td><td style="text-align: left">Logarithm of the STFT transformed via a mel-spaced filter bank.</td></tr><tr><td style="text-align: left">Mel Cepsral Coefficients (MFCCs)</td><td style="text-align: left"><code>MFCC([options])</code></td><td style="text-align: left">Classical MFCC features</td></tr></table><p>As an example, we will use the popular Mel Frequency Cepstral Coefficients (MFCC) features. First we create the extractor with the default configuration:</p><pre><code class="language-julia">julia&gt; mfcc = MFCC()</code></pre><p>and then, we extract and plot the features from our TIMIT sample:</p><pre><code class="language-julia">julia&gt; fea = x |&gt; mfcc</code></pre><p>Here is the list of possible options for each extractor</p><table><tr><th style="text-align: left">Option name</th><th style="text-align: left">Default</th><th style="text-align: left">Supported by</th><th style="text-align: left">Description</th></tr><tr><td style="text-align: left"><code>removedc</code></td><td style="text-align: left"><code>true</code></td><td style="text-align: left">all</td><td style="text-align: left">Remove the direct component from the signal.</td></tr><tr><td style="text-align: left"><code>dithering</code></td><td style="text-align: left"><code>true</code></td><td style="text-align: left">all</td><td style="text-align: left">Add Gaussian white noise with <code>dithering</code> stdandard deviation.</td></tr><tr><td style="text-align: left"><code>srate</code></td><td style="text-align: left"><code>16000</code></td><td style="text-align: left">all</td><td style="text-align: left">Sampling rate in Hz of the input signal</td></tr><tr><td style="text-align: left"><code>frameduration</code></td><td style="text-align: left"><code>0.025</code></td><td style="text-align: left">all</td><td style="text-align: left">Frame duration in seconds.</td></tr><tr><td style="text-align: left"><code>framestep</code></td><td style="text-align: left"><code>0.011</code></td><td style="text-align: left">all</td><td style="text-align: left">Frame step (hop size) in seconds.</td></tr><tr><td style="text-align: left"><code>preemphasis</code></td><td style="text-align: left"><code>0.97</code></td><td style="text-align: left">all</td><td style="text-align: left">Preemphasis filter coefficient.</td></tr><tr><td style="text-align: left"><code>windowfn</code></td><td style="text-align: left"><code>SpeechFeatures.HannWindow</code></td><td style="text-align: left">all</td><td style="text-align: left">Windowing function (others are <code>HammingWindow</code> or <code>RectangularWindow</code>).</td></tr><tr><td style="text-align: left"><code>windowpower</code></td><td style="text-align: left"><code>0.85</code></td><td style="text-align: left">all</td><td style="text-align: left">Sharpening exponent of the window.</td></tr><tr><td style="text-align: left"><code>nfilters</code></td><td style="text-align: left"><code>26</code></td><td style="text-align: left">LogMelSpectrum | MFCC</td><td style="text-align: left">Number of filters in the filter bank.</td></tr><tr><td style="text-align: left"><code>lofreq</code></td><td style="text-align: left"><code>80</code></td><td style="text-align: left">LogMelSpectrum | MFCC</td><td style="text-align: left">Low cut-off frequency in Hz for the filter bank.</td></tr><tr><td style="text-align: left"><code>hifreq</code></td><td style="text-align: left"><code>7600</code></td><td style="text-align: left">LogMelSpectrum | MFCC</td><td style="text-align: left">High cut-off frequency in Hz for the filter bank.</td></tr><tr><td style="text-align: left"><code>addenergy</code></td><td style="text-align: left"><code>true</code></td><td style="text-align: left">MFCC</td><td style="text-align: left">Append the per-frame energy to the features.</td></tr><tr><td style="text-align: left"><code>nceps</code></td><td style="text-align: left"><code>12</code></td><td style="text-align: left">MFCC</td><td style="text-align: left">Number of cepstral coefficients.</td></tr><tr><td style="text-align: left"><code>liftering</code></td><td style="text-align: left"><code>22</code></td><td style="text-align: left">MFCC</td><td style="text-align: left">Liftering coefficient.</td></tr></table><h2 id="Deltas-and-mean-normalization-1"><a class="docs-heading-anchor" href="#Deltas-and-mean-normalization-1">Deltas and mean normalization</a><a class="docs-heading-anchor-permalink" href="#Deltas-and-mean-normalization-1" title="Permalink"></a></h2><p>The deltas and acceleration coefficients (i.e. &quot;double deltas&quot;) can be computed by chaining the features extraction with the deltas features extractor:</p><pre><code class="language-julia">julia&gt; Δ_ΔΔ = DeltaCoeffs(order = 2, deltawin = 2)
julia&gt; fea = x |&gt; mfcc |&gt; Δ_ΔΔ</code></pre><p>The <code>order</code> parameter is the order of the deltas coefficients, i.e. <code>order = 2</code> means that the first and second deltas (acceleration) coefficients will be computed. <code>deltawin</code> is the length of the delta window.</p><p>Similarly, to remove the mean of the utterance you can add one more element to the chain:</p><pre><code class="language-julia">julia&gt; mnorm = MeanNorm()
julia&gt; fea = x |&gt; mfcc |&gt; Δ_ΔΔ |&gt; mnorm</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 15 October 2021 16:13">Friday 15 October 2021</span>. Using Julia version 1.5.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
